# Layer this on top of config/default-single-timestep.yaml to keep only a
# curated set of generation and storage carriers. Intended as the default
# "extra functionality" test that exercises scripts/extra/limit_core_technologies.py.
#
# IMPORTANT: This override should use the same geographic and nodal scope as the base config.
# When updating base config countries or clusters, ensure they match here.
# Current alignment: 17-country reduced set, 70 clusters (matching day-threehour.yaml).

run:
  name: europe-day-core-tech
  shared_cutouts: true

regions: ["europe"]
countries:
  - "AT"
  - "BG"
  - "CZ"
  - "DE"
  - "DK"
  - "ES"
  - "FR"
  - "GB"
  - "GR"
  - "HU"
  - "IT"
  - "PL"
  - "PT"
  - "RO"
  - "RS"
  - "SE"

scenario:
  simpl: [""]
  ll: ["copt"]
  clusters: [70]
  opts:
    - "Co2L-3h"

clustering:
  focus_weights:
    DE: 0.0417
    FR: 0.0492
    GB: 0.0418
    IT: 0.0416
    ES: 0.0294
    PL: 0.0236
    NL: 0.0111
    SE: 0.0045
    DK: 0.0037
    NO: 0.0034
    AT: 0.0055
    BG: 0.0030
    CZ: 0.0050
    GR: 0.0040
    HU: 0.0040
    PT: 0.0035
    RO: 0.0045
    RS: 0.0025

solving:
  options:
    formulation: kirchhoff
    load_shedding: 500.
    noisy_costs: false
    clip_p_max_pu: 0.01
    min_iterations: 1
    max_iterations: 2
    skip_iterations: true
    track_iterations: false
    extra_functionality:
      - scripts/extra/limit_core_technologies.py::limit_core_technologies
  solver:
    name: gurobi
    options: gurobi-default
  mem: 24000

custom:
  core_technologies:
    allow_generators:
      - "CCGT"
      - "nuclear"
      - "onwind"
      - "offwind-ac"
      - "offwind-dc"
      - "solar"
      - "hydro"
      - "ror"  # run-of-river
      - "biomass"
      - "coal"
      - "lignite"
      - "oil"
      - "load shedding"  # penalty generator for infeasible runs
    allow_storage:
      - "PHS"  # pumped hydro storage
      - "battery"
      - "gas"  # hydrogen storage
      - "H2"  # hydrogen storage

global_constraints:
  - name: CO2LimitZero
    sense: "<="
    type: "primary_energy"
    carrier_attribute: "co2_emissions"
    constant: 0.0
